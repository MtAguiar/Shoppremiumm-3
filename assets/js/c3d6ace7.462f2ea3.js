(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{92:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(7),o=(n(0),n(98)),i={title:"Using React Components"},s={unversionedId:"guides/using-react",id:"guides/using-react",isDocsHomePage:!1,title:"Using React Components",description:"Nx-Shopify leverage from Nx workspaces power and provides customization capabilities in order to integrate technologies like React. The following guide will take you step by step in how to use React components in your Shopify theme in a clean, simple and well-architected way.",source:"@site/docs/guides/using-react.md",slug:"/guides/using-react",permalink:"/nx-shopify/docs/guides/using-react",editUrl:"https://github.com/trafilea/nx-shopify/edit/master/docs/docs/guides/using-react.md",version:"current",sidebar:"docs",previous:{title:"Liquid in Styles",permalink:"/nx-shopify/docs/guides/liquid-in-styles"},next:{title:"Extend Webpack Configuration",permalink:"/nx-shopify/docs/guides/extend-webpack"}},c=[{value:"Preparing the workspace",id:"preparing-the-workspace",children:[]},{value:"Installing dependencies",id:"installing-dependencies",children:[]},{value:"Configuring your theme for React",id:"configuring-your-theme-for-react",children:[]},{value:"Creating your React components",id:"creating-your-react-components",children:[{value:"Creating components in your theme project",id:"creating-components-in-your-theme-project",children:[]},{value:"Creating components in React libraries",id:"creating-components-in-react-libraries",children:[]}]},{value:"Rendering React components in your theme",id:"rendering-react-components-in-your-theme",children:[{value:"Bonus: passing the ThemeContext to React libraries",id:"bonus-passing-the-themecontext-to-react-libraries",children:[]}]}],l={toc:c};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",{align:"center"},Object(o.b)("img",{src:"/nx-shopify/img/react-logo.png",height:"250"})),Object(o.b)("p",null,"Nx-Shopify leverage from Nx workspaces power and provides customization capabilities in order to integrate technologies like React. The following guide will take you step by step in how to use React components in your Shopify theme in a clean, simple and well-architected way."),Object(o.b)("h2",{id:"preparing-the-workspace"},"Preparing the workspace"),Object(o.b)("p",null,"Having Nx-Shopify installed in your Nx workspace, let's generate a theme called ",Object(o.b)("inlineCode",{parentName:"p"},"my-theme")," to integrate React in it."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"$ nx g @trafilea/nx-shopify:theme my-theme\n")),Object(o.b)("h2",{id:"installing-dependencies"},"Installing dependencies"),Object(o.b)("p",null,"Taking advantage of Nx, we will use the ",Object(o.b)("a",{parentName:"p",href:"https://nx.dev/latest/react/react/overview"},"Nx plugin for React")," to integrate react in our Shopify theme."),Object(o.b)("p",null,"Install the plugin in your workspace:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"# npm\n$ npm install --save-dev @nrwl/react\n\n# yarn\n$ yarn add --dev @nrwl/react\n\n# pnpm\n$ pnpm add --save-dev @nrwl/react\n")),Object(o.b)("p",null,"Then initialize the plugin:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"# npm\n$ nx generate @nrwl/react:init\n\n$ nx g @nrwl/react:init # same\n")),Object(o.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Learn more about the usage of the ",Object(o.b)("inlineCode",{parentName:"p"},"@nrwl/react")," plugin at ",Object(o.b)("a",{parentName:"p",href:"https://nx.dev/latest/react/react/overview"},"Nx docs site")))),Object(o.b)("h2",{id:"configuring-your-theme-for-react"},"Configuring your theme for React"),Object(o.b)("p",null,"In order to support react components, make sure the following properties are configured in the ",Object(o.b)("inlineCode",{parentName:"p"},"apps/my-theme/tsconfig.json")," file"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff",metastring:'title="apps/my-theme/tsconfig.json"',title:'"apps/my-theme/tsconfig.json"'},'{\n  "extends": "../../tsconfig.base.json",\n  "compilerOptions": {\n+   "jsx": "react-jsx",\n+   "allowJs": true, (this one is optional)\n+   "esModuleInterop": true,\n+   "allowSyntheticDefaultImports": true\n  },\n  "files": [],\n  "include": [],\n  "references": [\n    {\n      "path": "./tsconfig.app.json"\n    },\n    {\n      "path": "./tsconfig.spec.json"\n    }\n  ]\n}\n')),Object(o.b)("p",null,"And your ",Object(o.b)("inlineCode",{parentName:"p"},"apps/my-theme/tsconfig.app.json")," should look similar to this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff",metastring:'title="apps/my-theme/tsconfig.app.json"',title:'"apps/my-theme/tsconfig.app.json"'},'{\n  "extends": "./tsconfig.json",\n  "compilerOptions": {\n    "outDir": "../../dist/out-tsc",\n    "types": ["node"]\n  },\n+ "files": [\n+   "../../node_modules/@nrwl/react/typings/cssmodule.d.ts",\n+   "../../node_modules/@nrwl/react/typings/image.d.ts"\n+ ],\n  "exclude": ["**/*.spec.ts", "**/*.spec.tsx"],\n  "include": ["**/*.js", "**/*.jsx", "**/*.ts", "**/*.tsx"]\n}\n')),Object(o.b)("p",null,"Note: set the paths according to your theme's location in the workspace."),Object(o.b)("p",null,"Finally, add the ",Object(o.b)("inlineCode",{parentName:"p"},"@nrwl/nx/react")," eslint plugin to the theme's ",Object(o.b)("inlineCode",{parentName:"p"},".eslintrc.json")," config file."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-json",metastring:'{2} title="apps/my-theme/.eslintrc.json"',"{2}":!0,title:'"apps/my-theme/.eslintrc.json"'},'{\n  "extends": ["plugin:@nrwl/nx/react", "../../.eslintrc.json"],\n  "ignorePatterns": ["!**/*"],\n  "overrides": [\n    {\n      "files": ["*.ts", "*.tsx", "*.js", "*.jsx"],\n      "parserOptions": {\n        "project": ["apps/my-theme/tsconfig.*?.json"]\n      },\n      "rules": {}\n    },\n    {\n      "files": ["*.ts", "*.tsx"],\n      "rules": {}\n    },\n    {\n      "files": ["*.js", "*.jsx"],\n      "rules": {}\n    }\n  ]\n}\n')),Object(o.b)("hr",null),Object(o.b)("p",null,"If you are planning to have react components within your theme project (more info about this below) then create a ",Object(o.b)("inlineCode",{parentName:"p"},".babelrc")," file with the following content:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-json",metastring:'title="apps/my-theme/.babelrc"',title:'"apps/my-theme/.babelrc"'},'{\n  "presets": [\n    [\n      "@nrwl/react/babel",\n      {\n        "runtime": "automatic"\n      }\n    ]\n  ]\n}\n')),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Depending on your choosen styling option you may need add one (or many) additional plugins to your ",Object(o.b)("inlineCode",{parentName:"p"},".babelrc"),"."))),Object(o.b)("p",null,"Next modify your ",Object(o.b)("inlineCode",{parentName:"p"},"apps/my-theme/jest.config.js")," like the following:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript",metastring:'{5-6} title="apps/my-theme/jest.config.js"',"{5-6}":!0,title:'"apps/my-theme/jest.config.js"'},"module.exports = {\n  displayName: 'my-theme',\n  preset: '../../jest.preset.js',\n  transform: {\n    '^(?!.*\\\\.(js|jsx|ts|tsx|css|json)$)': '@nrwl/react/plugins/jest',\n    '^.+\\\\.[tj]sx?$': 'babel-jest',\n  },\n  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx'],\n  coverageDirectory: '../../coverage/apps/my-theme',\n};\n")),Object(o.b)("h2",{id:"creating-your-react-components"},"Creating your React components"),Object(o.b)("p",null,"You can make use of the ",Object(o.b)("inlineCode",{parentName:"p"},"@nrwl/react")," Nx plugin to generate your React components. Where you are going to generate your components depends on your choice, here you have multiple options: generate the components in your theme project, create React libraries or both!"),Object(o.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"When generating your components, you can make use of ",Object(o.b)("inlineCode",{parentName:"p"},"SASS")," or any ",Object(o.b)("inlineCode",{parentName:"p"},"styles in JS (styled-components, emotion, styled-jsx, etc)")," styling option. Other styling options are not supported."))),Object(o.b)("h3",{id:"creating-components-in-your-theme-project"},"Creating components in your theme project"),Object(o.b)("p",null,"If you are going to have your components in your theme project you can simply generate them using the nx cli. See the following example:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"nx generate @nrwl/react:component hello-world --project my-theme --export false\nnx g @nrwl/react:component foo --project my-theme --export false\nnx g @nrwl/react:c bar --project my-theme --export false\n")),Object(o.b)("p",null,"And this will create the following components"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-treeview"},"apps/my-theme/src/app\n\u251c\u2500\u2500 bar\n\u2502   \u251c\u2500\u2500 bar.spec.tsx\n\u2502   \u2514\u2500\u2500 bar.tsx\n\u251c\u2500\u2500 foo\n\u2502   \u251c\u2500\u2500 foo.spec.tsx\n\u2502   \u2514\u2500\u2500 foo.tsx\n\u2514\u2500\u2500 hello-world\n    \u251c\u2500\u2500 hello-world.spec.tsx\n    \u2514\u2500\u2500 hello-world.tsx\n")),Object(o.b)("p",null,"Notice that, because of how the ",Object(o.b)("inlineCode",{parentName:"p"},"@nrwl/react")," plugin works, your React components will live under the ",Object(o.b)("inlineCode",{parentName:"p"},"src/app")," directory by default. You can specify where do you want your component to be generated with the ",Object(o.b)("inlineCode",{parentName:"p"},"--directory")," option in the generate command. Example:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"nx generate @nrwl/react:component hello-world --project my-theme --export false --directory components\nnx g @nrwl/react:component foo --project my-theme --export false --directory components/example\nnx g @nrwl/react:c bar --project my-theme --export false --directory components/example\n")),Object(o.b)("p",null,"Now your components will be located at"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-treeview"},"apps/my-theme/src/components\n\u251c\u2500\u2500 example\n\u2502   \u251c\u2500\u2500 bar\n\u2502   \u2502   \u251c\u2500\u2500 bar.module.scss\n\u2502   \u2502   \u251c\u2500\u2500 bar.spec.tsx\n\u2502   \u2502   \u2514\u2500\u2500 bar.tsx\n\u2502   \u2514\u2500\u2500 foo\n\u2502       \u251c\u2500\u2500 foo.module.scss\n\u2502       \u251c\u2500\u2500 foo.spec.tsx\n\u2502       \u2514\u2500\u2500 foo.tsx\n\u2514\u2500\u2500 hello-world\n    \u251c\u2500\u2500 hello-world.module.scss\n    \u251c\u2500\u2500 hello-world.spec.tsx\n    \u2514\u2500\u2500 hello-world.tsx\n")),Object(o.b)("h3",{id:"creating-components-in-react-libraries"},"Creating components in React libraries"),Object(o.b)("p",null,"Using this approach, you can use the ",Object(o.b)("inlineCode",{parentName:"p"},"@nrwl/react")," plugin to create React libraries as you would normally do. Let's create a feature lib for our theme that would display a banner on the top of our store."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"nx g @nrwl/react:lib feature-banner --directory my-theme\n")),Object(o.b)("p",null,"This will create the following library"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-treeview"},"libs\n\u2514\u2500\u2500 my-theme\n    \u2514\u2500\u2500 feature-banner\n        \u251c\u2500\u2500 jest.config.js\n        \u251c\u2500\u2500 README.md\n        \u251c\u2500\u2500 src\n        \u2502   \u251c\u2500\u2500 index.ts\n        \u2502   \u2514\u2500\u2500 lib\n        \u2502       \u251c\u2500\u2500 my-theme-feature-banner.module.scss\n        \u2502       \u251c\u2500\u2500 my-theme-feature-banner.spec.tsx\n        \u2502       \u2514\u2500\u2500 my-theme-feature-banner.tsx\n        \u251c\u2500\u2500 tsconfig.json\n        \u251c\u2500\u2500 tsconfig.lib.json\n        \u2514\u2500\u2500 tsconfig.spec.json\n")),Object(o.b)("p",null,"Then you can generate as many additional components as you need to your react library. Example:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"nx g @nrwl/react:c banner-text --project my-theme-feature-banner\n")),Object(o.b)("p",null,"And use it in your main lib component"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-tsx",metastring:'{4,13} title="libs/my-theme/feature-banner/src/lib/my-theme-feature-banner.tsx"',"{4,13}":!0,title:'"libs/my-theme/feature-banner/src/lib/my-theme-feature-banner.tsx"'},"import React from 'react';\n\nimport './my-theme-feature-banner.module.scss';\nimport BannerText from './banner-text/banner-text';\n\n/* eslint-disable-next-line */\nexport interface MyThemeFeatureBannerProps {}\n\nexport function MyThemeFeatureBanner(props: MyThemeFeatureBannerProps) {\n  return (\n    <div>\n      <h1>Welcome to my-theme-feature-banner!</h1>\n      <BannerText></BannerText>\n    </div>\n  );\n}\n\nexport default MyThemeFeatureBanner;\n")),Object(o.b)("h2",{id:"rendering-react-components-in-your-theme"},"Rendering React components in your theme"),Object(o.b)("p",null,"Now that everything is configured and your React components are ready to be used, it's time to actually render them in your theme."),Object(o.b)("p",null,"As your theme code is actually TypeScript (not TSX syntax) creating a wrapper function for your root components can help you easily import them. For the above example:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-tsx",metastring:'{18-20} title="libs/my-theme/feature-banner/src/lib/my-theme-feature-banner.tsx"',"{18-20}":!0,title:'"libs/my-theme/feature-banner/src/lib/my-theme-feature-banner.tsx"'},"import React from 'react';\n\nimport './my-theme-feature-banner.module.scss';\nimport BannerText from './banner-text/banner-text';\n\n/* eslint-disable-next-line */\nexport interface MyThemeFeatureBannerProps {}\n\nexport function MyThemeFeatureBanner(props: MyThemeFeatureBannerProps) {\n  return (\n    <div>\n      <h1>Welcome to my-theme-feature-banner!</h1>\n      <BannerText></BannerText>\n    </div>\n  );\n}\n\nexport function MyThemeFeatureBannerWrapper(props: MyThemeFeatureBannerProps) {\n  return <MyThemeFeatureBanner {...props} />;\n}\n\nexport default MyThemeFeatureBanner;\n")),Object(o.b)("p",null,"Now you can call this function to render your component in your ",Object(o.b)("inlineCode",{parentName:"p"},"theme-global.module.ts"),", a layout TS files, a template TS file, etc... depending on your use case. Let's, for example, render the above component in our ",Object(o.b)("inlineCode",{parentName:"p"},"theme")," layout."),Object(o.b)("p",null,"Add the root element where the component will be rendered in the respective liquid file. For this case, add the following to the ",Object(o.b)("inlineCode",{parentName:"p"},"theme.liquid")," layout file."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-html",metastring:'{15} title="apps/my-theme/src/theme/layout/theme/theme.liquid"',"{15}":!0,title:'"apps/my-theme/src/theme/layout/theme/theme.liquid"'},"<!DOCTYPE html>\n<html>\n  <head>\n    <title>{{ page_title }}</title>\n\n    ... {% render 'script-tags' %} {% render 'style-tags' %} {{\n    content_for_header }}\n    \x3c!-- Header hook for plugins --\x3e\n  </head>\n  <body>\n    <div id=\"banner-root\"></div>\n\n    ...\n\n    <main role=\"main\">{{ content_for_layout }}</main>\n\n    ...\n\n    <script>\n      window.addEventListener('DOMContentLoaded', function() {\n          window.themeBootstrap({\n              themeLayoutName: 'theme',\n              themeTemplateName: '{{ template }}',\n              themeContext: {% render 'theme-context' %},\n              loadGlobal: true,\n          });\n        });\n    <\/script>\n  </body>\n</html>\n")),Object(o.b)("p",null,"Now, import the ",Object(o.b)("inlineCode",{parentName:"p"},"render")," function from the ",Object(o.b)("inlineCode",{parentName:"p"},"react-dom")," package and your component wrapper function in the ",Object(o.b)("inlineCode",{parentName:"p"},"theme.layout.ts")," file."),Object(o.b)("p",null,"Next, call the render function and pass the return value of the component wrapper function (that receives the components props) and the root element."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-typescript",metastring:'{2-6,16-21} title="apps/my-theme/src/theme/layout/theme/theme.layout.ts"',"{2-6,16-21}":!0,title:'"apps/my-theme/src/theme/layout/theme/theme.layout.ts"'},"import { ThemeModule, ThemeContext, ThemeOnReady } from '@myorg/my-theme/core';\nimport { render } from 'react-dom';\nimport {\n  MyThemeFeatureBannerWrapper,\n  MyThemeFeatureBannerProps,\n} from '@myorg/my-theme/feature-banner';\n\nimport './theme.layout.scss';\n\nexport class ThemeLayout extends ThemeModule implements ThemeOnReady {\n  constructor(context: ThemeContext) {\n    super(context);\n  }\n\n  onReady() {\n    const bannerProps: MyThemeFeatureBannerProps = {};\n\n    render(\n      MyThemeFeatureBannerWrapper(bannerProps),\n      document.getElementById('banner-root')\n    );\n  }\n}\n")),Object(o.b)("p",null,"Finally, run the serve target to view your theme with your React components working!"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"nx serve my-theme -o\n")),Object(o.b)("h3",{id:"bonus-passing-the-themecontext-to-react-libraries"},"Bonus: passing the ThemeContext to React libraries"),Object(o.b)("p",null,"It may be possible that you would like to have your ",Object(o.b)("inlineCode",{parentName:"p"},"ThemeContext")," (or part of it) available inside a React library used by your theme."),Object(o.b)("p",null,"To achieve this, you can certainly define the typings of your components props object in the react library. However, it may come handy to share a single ",Object(o.b)("inlineCode",{parentName:"p"},"ThemeContext")," type definition across your theme project and your libraries. Let's go through the process."),Object(o.b)("p",null,"First you will need to create a shared library where your ",Object(o.b)("inlineCode",{parentName:"p"},"ThemeContext")," type definitons are going to live."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"nx g @nrwl/workspace:lib theme-context --directory my-theme/shared\n")),Object(o.b)("p",null,"You will get a lib structure like the following (you can delete the test files). The ",Object(o.b)("inlineCode",{parentName:"p"},"ThemeContext")," will be defined in the ",Object(o.b)("inlineCode",{parentName:"p"},"my-theme-shared-theme-context.ts")," file."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-treeview",metastring:"{8}","{8}":!0},"libs/my-theme/shared\n\u2514\u2500\u2500 theme-context\n    \u251c\u2500\u2500 jest.config.js\n    \u251c\u2500\u2500 README.md\n    \u251c\u2500\u2500 src\n    \u2502   \u251c\u2500\u2500 index.ts\n    \u2502   \u2514\u2500\u2500 lib\n    \u2502       \u2514\u2500\u2500 my-theme-shared-theme-context.ts\n    \u251c\u2500\u2500 tsconfig.json\n    \u251c\u2500\u2500 tsconfig.lib.json\n    \u2514\u2500\u2500 tsconfig.spec.json\n")),Object(o.b)("p",null,"Add the type definitions to the ",Object(o.b)("inlineCode",{parentName:"p"},"my-theme-shared-theme-context.ts")," file:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="libs/my-theme/shared/theme-context/src/lib/my-theme-shared-theme-context.ts"',title:'"libs/my-theme/shared/theme-context/src/lib/my-theme-shared-theme-context.ts"'},"export interface BannerContext {\n  globalMessage: string;\n}\n\nexport interface ThemeContext {\n  themeName: string;\n  banner?: BannerContext;\n}\n")),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"You can, and perhaps you should, organize the portions of your ",Object(o.b)("inlineCode",{parentName:"p"},"ThemeContext")," interface in different files according to your needs. Make sure they are exported in the library's ",Object(o.b)("inlineCode",{parentName:"p"},"index.ts")," file."))),Object(o.b)("p",null,"Go to the ",Object(o.b)("inlineCode",{parentName:"p"},"apps/my-theme/src/core/theme-context.ts")," file, remove the current content and export everything from the theme context library."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="apps/my-theme/src/core/theme-context.ts"',title:'"apps/my-theme/src/core/theme-context.ts"'},"export * from '@myorg/my-theme/shared/theme-context';\n")),Object(o.b)("p",null,"The above will make your theme work with the types defined in the library without requiring to change the imports from all of the theme blocks (layouts, templates, sections and snippets)."),Object(o.b)("p",null,"Go to your React libray and add the ",Object(o.b)("inlineCode",{parentName:"p"},"ThemeContext")," (or part of it) to your components props type definition and make use of it. Notice the interface is imported from the shared library."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-typescript",metastring:'{5,9,13,18} title="libs/my-theme/feature-banner/src/lib/my-theme-feature-banner.tsx"',"{5,9,13,18}":!0,title:'"libs/my-theme/feature-banner/src/lib/my-theme-feature-banner.tsx"'},"import React from 'react';\n\nimport './my-theme-feature-banner.module.scss';\nimport BannerText from './banner-text/banner-text';\nimport { BannerContext } from '@myorg/my-theme/shared/theme-context';\n\n/* eslint-disable-next-line */\nexport interface MyThemeFeatureBannerProps {\n  banner: BannerContext;\n}\n\nexport function MyThemeFeatureBanner(props: MyThemeFeatureBannerProps) {\n  const { banner } = props;\n\n  return (\n    <div>\n      <h1>Welcome to my-theme-feature-banner!</h1>\n      <BannerText>{banner.globalMessage}</BannerText>\n    </div>\n  );\n}\n\nexport function MyThemeFeatureBannerWrapper(props: MyThemeFeatureBannerProps) {\n  return <MyThemeFeatureBanner {...props} />;\n}\n\nexport default MyThemeFeatureBanner;\n")),Object(o.b)("p",null,"Now back in the ",Object(o.b)("inlineCode",{parentName:"p"},"theme.layout.ts")," file, you just need to pass the respective context in the component props to the component wrapper function:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-typescript",metastring:'{17-19} title="apps/my-theme/src/theme/layout/theme/theme.layout.ts"',"{17-19}":!0,title:'"apps/my-theme/src/theme/layout/theme/theme.layout.ts"'},"import { ThemeContext, ThemeModule, ThemeOnReady } from '@myorg/my-theme/core';\nimport {\n  MyThemeFeatureBannerProps,\n  MyThemeFeatureBannerWrapper,\n} from '@myorg/my-theme/feature-banner';\nimport { render } from 'react-dom';\nimport './theme.layout.scss';\n\nexport class ThemeLayout extends ThemeModule implements ThemeOnReady {\n  constructor(context: ThemeContext) {\n    super(context);\n  }\n\n  onReady() {\n    console.log('MyTheme | Theme Layout: onReady() called');\n\n    const bannerProps: MyThemeFeatureBannerProps = {\n      banner: this.context.banner,\n    };\n\n    render(\n      MyThemeFeatureBannerWrapper(bannerProps),\n      document.getElementById('banner-root')\n    );\n  }\n}\n")),Object(o.b)("p",null,"And you're ready to go!"))}p.isMDXComponent=!0},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,h=m["".concat(i,".").concat(u)]||m[u]||b[u]||o;return n?a.a.createElement(h,s(s({ref:t},l),{},{components:n})):a.a.createElement(h,s({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);